import React, { createContext, useContext, ReactNode, useMemo } from "react";
import { useSettings } from "@/contexts/SettingsContext";

type Lang = "fr" | "en" | "ar";

const translations: Record<Lang, Record<string, string>> = {
  fr: {
    // General
    index_brand: "EPILERT",
    menu_dashboard: "Tableau de bord",
    menu_patients: "Patients",
    menu_profile: "Profil",
    menu_alerts: "Alertes",
    menu_settings: "Paramètres",
    account_pages: "Pages de compte",
    logout: "Se déconnecter",
    toggle_sidebar: "Basculer la barre latérale",

    // Auth / Registration
    login_title: "Se connecter à Epilert",
    login_subtitle: "Connectez-vous avec vos identifiants",
    log_in: "Se connecter",
    email_address: "Adresse e-mail",
    password_label: "Mot de passe",
    remember_me: "Se souvenir de moi",
    forgot_password: "Mot de passe oublié?",
    logging_in: "Connexion...",
    login_successful: "Connexion réussie",
    login_failed: "Échec de la connexion",
    create_account: "Créer un compte",
    register_subtitle: "Inscrivez-vous pour commencer à utiliser Epilert",
    register_button: "S'inscrire",
    confirm_password: "Confirmer le mot de passe",

    // Registration helpers
    agree_required: "Vous devez accepter les conditions",
    password_mismatch: "Les mots de passe ne correspondent pas",
    register: "Inscription",
    creating_account: "Création du compte...",
    or_sign_up_with: "Ou inscrivez-vous avec",
    already_have_account: "Vous avez déjà un compte?",

    // Dashboard
    dashboard_title: "Tableau de bord",
    dashboard_subtitle: "Voici ce qui se passe avec vos patients aujourd'hui",
    greeting_morning: "Bonjour {name} !",
    new_seizures: "Nouvelles crises",
    active_label: "Actif",
    percent_from_last_week: "{value} depuis la semaine dernière",
    from_last_week: "depuis la semaine dernière",
    pending_cases: "Cas en attente",
    pending_label: "En attente",
    awaiting_review: "En attente de validation",
    high_risk_cases: "Cas à haut risque",
    urgent_label: "Urgent",
    requires_attention: "Nécessite une attention",
    seizure_activity_title: "Activité des crises (7 jours)",
    patient_activity_overview: "Aperçu de l'activité des patients (30 jours)",
    recent_patients: "Patients récents",
    risk_distribution: "Répartition des risques",
    monitoring_intensive: "Surveillance intensive",
    total_patients: "Total Patients",
    total_label: "Total",
    total_alerts: "Alertes totales",
    critical_label: "Critique",
    warnings_label: "Avertissements",
    info_label: "Info",
    risk_critical: "Critique",
    risk_high: "Élevé",
    risk_medium: "Moyen",
    risk_stable: "Stable",
    risk_low: "Faible",

    // Alerts
    alerts_title: "Alertes",
    alerts_subtitle: "Voici ce qui se passe avec vos patients aujourd'hui",
    all_alerts: "Toutes les alertes",
    search_alerts_placeholder: "Rechercher des alertes par titre, patient ou description...",
    seizure_episode_detected: "Episode de crise détecté",
    seizure_episode_desc: "Le patient {name} a subi un épisode de crise sévère. Attention immédiate requise.",
    high_risk_score_alert_title: "Alerte de score élevé",
    high_risk_score_alert_desc: "Le score de risque du patient {name} a augmenté à {score}. Révision recommandée.",
    abnormal_heart_rate: "Rythme cardiaque anormal",
    abnormal_heart_rate_desc: "Le rythme cardiaque du patient {name} est à 105 bpm. Surveillance étroite requise.",
    medication_reminder: "Rappel de médicament",
    medication_reminder_desc: "Le calendrier de médicaments du patient {name} est dû dans 2 heures.",
    missed_appointment: "Rendez-vous manqué",
    missed_appointment_desc: "Le patient {name} a manqué le rendez-vous programmé aujourd'hui.",
    treatment_completed: "Traitement terminé",
    treatment_completed_desc: "Le patient {name} a terminé le traitement prescrit avec succès.",
    lab_results_available: "Résultats de laboratoire disponibles",
    lab_results_available_desc: "De nouveaux résultats de laboratoire pour le patient {name} sont prêts pour examen.",
    vital_signs_change: "Changement des signes vitaux",
    vital_signs_change_desc: "Le patient {name} montre des changements dans les signes vitaux. Révision nécessaire.",
    no_alerts_found: "Aucune alerte trouvée",
    view_details: "Voir les détails",

    // Patients
    patients_title: "Patients",
    all_patients: "Tous les patients",
    manage_and_monitor: "Gérez et surveillez vos patients",
    add_patient: "Ajouter un Patient",
    edit_patient_title: "Modifier Patient",
    edit_patient_subtitle: "Modifiez les informations du patient",
    back_to_patients: "Retour aux Patients",
    patient_not_found: "Patient non trouvé",
    patient_updated: "Patient mis à jour",
    patient_added: "Patient ajouté",
    new_patient: "Nouveau patient",
    search_patients: "Rechercher des patients...",
    all_statuses: "Tous les statuts",
    sort_by: "Trier par",
    sort_recent: "Récents",
    sort_name: "Nom",
    sort_risk: "Risque",
    filter_label: "Filtre",
    showing_entries: "Affichage de {count} entrées sur {total}",

    // Noms de patients
    patient_gomes_ing: "Gomes Ing",
    patient_mohamed_tarek: "Mohamed Tarek",
    patient_helena_baker: "Helena Baker",
    patient_reda: "reda",
    patient_safaa_fekni: "Safaa FEKNI",
    patient_testeur: "Testeur",
    patient_tester: "tester",
    patient_maya_brahimi: "Maya Brahimi",
    patient_hishem_driaesse: "Hishem Driaesse",
    patient_nada_soufiene: "Nada Soufiene",
    patient_randaj_grand: "Randaj D Grand",
    patient_leila_marissa: "Leila Marissa",
    patient_kais_saidi: "Kais Saidi",
    patient_mouaz_haddous: "Mouaz Haddous",
    patient_sara_benali: "Sara Benali",
    patient_amira_laith: "Amira Laith",

    // Descriptions médicales
    medical_desc_reda: "Nouveau patient",
    medical_desc_safaa: "New patient",
    medical_desc_testeur: "New patient",
    medical_desc_tester: "Nouveau",
    medical_desc_maya: "Trouble neurologique provoquant des épisodes de crises récurrents",
    medical_desc_hishem: "Difficultés visuelles et d'élocution indiquant un potentiel AVC",
    medical_desc_nada: "Perturbation du système visuel du SNC provoquant des vertiges",
    medical_desc_randaj: "Transition du manque de circulation sanguine vers le cerveau prévenant une crise cardiaque",
    medical_desc_leila: "Crise focale engorgée ou tonico-clonique avec perte de conscience",
    medical_desc_kais: "Réduction de la capacité motrice du cœur entraînant une insuffisance",
    medical_desc_mouaz: "Pression ou serrement dans la poitrine accompagné",
    medical_desc_sara: "Difficulté respiratoire déclenchée par l'effort physique",
    medical_desc_amira: "Crises récurrentes sans cause identifiable",

    // Profile
    profile_title: "Profil",
    profile_subtitle: "Vos informations professionnelles",
    edit_profile: "Modifier le profil",
    available: "Disponible",
    short_bio: "Brève biographie",
    professional_information: "Informations professionnelles",
    education_label: "Éducation",
    availability_schedule: "Disponibilités",
    license_number: "Numéro de licence",
    specialization: "Spécialisation",
    years_experience: "Années d'expérience",
    department: "Département",

    // Patient details
    personal_info: "Informations Personnelles",
    full_name: "Nom complet",
    age_label: "Âge",
    age_label_short: "Âge",
    phone_label: "Téléphone",
    email_label: "Email",
    email_label_short: "Email",
    address_label: "Adresse",
    health_status_label: "État de santé",
    medical_description: "Description médicale",
    description_label: "Description",
    risk_score_label: "Score de risque",
    status_stable: "Stable",
    status_low: "Faible risque",
    status_medium: "Risque moyen",
    status_high: "Risque élevé",
    status_critical: "Critique",
    status_pending: "En attente",
    status_success: "Succès",

    // Table columns
    patients_table_status: "Statut",
    patients_table_age: "Âge",
    patients_table_description: "Description de la maladie",
    patients_table_risk_score: "Score de risque",
    patients_table_heart_rate: "Fréquence cardiaque",
    patients_table_health_status: "État de santé",
    patients_table_action: "Action",
    patients_table_last_visit: "Dernière visite",
    patients_table_name: "Nom",

    // Tabs
    tab_overview: "Aperçu",
    tab_seizure_history: "Historique des crises",
    tab_medications: "Médicaments",
    tab_clinical_notes: "Notes cliniques",
    about: "À propos",
    vital_signs: "Signes vitaux",

    // Note types
    consultation: "Consultation",
    observation: "Observation",
    followup: "Suivi",

    // Time
    just_now: "À l'instant",
    minutes_ago: "il y a {count} minutes",
    hours_ago: "il y a {count} heures",
    days_ago: "il y a {count} jours",
    weeks_ago: "il y a {count} semaines",

    // Settings
    settings_title: "Paramètres",
    settings_subtitle: "Gérez vos préférences et paramètres d'application",
    notifications: "Notifications",
    appearance: "Apparence",
    risk_score_settings: "Paramètres des scores de risque",
    data_privacy: "Confidentialité des données",

    // Notification settings
    critical_alerts_notifications: "Alertes de crises critiques",
    critical_alerts_notifications_desc: "Recevoir des notifications pour les alertes de patients à haut risque",
    medication_reminders: "Rappels de médicaments",
    medication_reminders_desc: "Recevoir des rappels pour les horaires de médicaments des patients",
    appointment_notifications: "Notifications de rendez-vous",
    appointment_notifications_desc: "Alertes pour les rendez-vous à venir et manqués",

    // Risk score settings
    high_risk_threshold: "Seuil de risque élevé",
    high_risk_threshold_desc: "Les patients au-dessus de ce score seront marqués comme à haut risque",
    alert_frequency: "Fréquence des alertes",
    realtime: "Temps réel",
    hourly: "Toutes les heures",
    daily: "Résumé quotidien",

    // Privacy settings
    share_analytics: "Partager les données analytiques",
    share_analytics_desc: "Aidez à améliorer nos modèles IA en partageant des données anonymisées",
    two_factor_auth: "Authentification à deux facteurs",
    two_factor_auth_desc: "Ajouter une couche de sécurité supplémentaire à votre compte",

    // UI / Misc
    save: "Enregistrer",
    cancel: "Annuler",
    save_changes: "Sauvegarder les modifications",
    reset: "Réinitialiser",
    settings_saved: "Paramètres sauvegardés",
    settings_saved_desc: "Vos préférences ont été mises à jour",
    settings_reset: "Paramètres réinitialisés",
    settings_reset_desc: "Les paramètres par défaut ont été restaurés",
    theme_light: "Clair",
    theme_dark: "Sombre",
    theme_system: "Système",
    theme_label: "Thème",
    language_label: "Langue",
    lang_fr: "Français",
    lang_en: "English",
    lang_ar: "العربية",

    // Alert types
    alert_type_critical: "Critique",
    alert_type_warning: "Avertissement",
    alert_type_info: "Information",
    alert_type_success: "Succès",
    alert_type_medication_intake: "Prise de médicament",
    medication_taken_title: "Médicament pris",
    medication_taken_desc: "Le patient {name} a pris son médicament {medication}.",
    patient: "Patient",

    // Placeholder texts
    enter_email_address: "Entrez votre adresse e-mail",
    enter_name: "Entrez votre nom",
    enter_password: "Entrez votre mot de passe",

    // Confirmation messages
    delete_patient_confirmation: "Êtes-vous sûr de vouloir supprimer le patient \"{name}\" ? Cette action est irréversible.",
    confirm_delete: "Confirmer la suppression",
    loading: "Chargement...",

    // Validation errors
    name_required: "Nom requis",
    age_required: "Âge requis",
    health_status_required: "État de santé requis",
    patient_registered: "Patient enregistré",
    patient_added_description: "{name} a bien été ajouté au dossier.",
    not_specified: "Non spécifié",
    just_now_text: "À l'instant",
    new_patient_text: "Nouveau patient",

    // PatientDetail toasts (French)
    missing_fields: "Champs manquants",
    fill_all_required_fields: "Veuillez remplir tous les champs obligatoires",
    fill_note_fields: "Veuillez remplir le titre et le contenu",
    fill_seizure_fields: "Veuillez remplir le type et la durée",
    note_title_label: "Titre",
    note_type_label: "Type de note",
    note_content_label: "Contenu",
    med_name_label: "Nom du médicament",
    med_dosage_label: "Dosage",
    med_frequency_label: "Fréquence",
    med_date_label: "Date de début",
    med_notes_label: "Notes (optionnel)",
    seizure_type_label: "Type de crise",
    seizure_duration_label: "Durée",
    seizure_date_label: "Date",
    seizure_notes_label: "Notes (optionnel)",
    not_provided: "Non renseigné",
    edit: "Modifier",
    add: "Ajouter",
    edit_medication: "Modifier le traitement",
    add_medication: "Ajouter un nouveau traitement",
    edit_note: "Modifier la note clinique",
    add_note: "Nouvelle note clinique",
    edit_seizure: "Modifier la crise",
    add_seizure: "Ajouter une nouvelle crise",
    delete_patient_button: "Supprimer le patient",
    last_visit: "Dernière visite",
    patient_info: "Informations",
    last_seizures: "Dernières crises",
    manage_treatments: "Gérer les traitements",
    manage_seizure_history: "Gérer l'historique",
    more_treatments: "+{count} autres traitements",
    new_this_week: "Nouveaux cette semaine",
    patients_added: "Patients ajoutés",
    password_saved: "Le mot de passe sera enregistré pour ce patient.",
    treatment_updated: "Traitement modifié",
    treatment_updated_desc: "Le traitement a été mis à jour avec succès",
    treatment_added: "Traitement ajouté",
    treatment_added_desc: "Nouveau traitement ajouté avec succès",
    treatment_archived: "Traitement archivé",
    treatment_archived_desc: "Le traitement a été archivé",
    treatment_unarchived: "Traitement désarchivé",
    treatment_unarchived_desc: "Le traitement a été réactivé",
    treatment_deleted: "Traitement supprimé",
    treatment_deleted_desc: "Le traitement a été supprimé",
    note_added: "Note ajoutée",
    note_added_desc: "Nouvelle note ajoutée avec succès",
    note_updated: "Note modifiée",
    note_updated_desc: "La note a été mise à jour",
    note_deleted: "Note supprimée",
    note_deleted_desc: "La note a été supprimée",
    seizure_recorded: "Crise enregistrée",
    seizure_recorded_desc: "La crise a été enregistrée avec succès",
    seizure_updated: "Crise modifiée",
    seizure_updated_desc: "La crise a été mise à jour",
    seizure_deleted: "Crise supprimée",
    seizure_deleted_desc: "La crise a été supprimée",
    recently: "Récemment",
    today: "Aujourd'hui",
    this_week: "Cette semaine",
    tomorrow: "Demain",
    mark_all_read: "Tout marquer comme lu",
    new_badge: "Nouveau",
    alert_critical: "Critique",
    alert_warning: "Avertissement",
    alert_info: "Information",
    alert_success: "Succès",
    view_patient_button: "Voir le patient",
    no_alerts_generated: "Aucune alerte générée pour vos patients pour le moment.",
    adjust_search_filter: "Essayez d'ajuster votre recherche ou vos critères de filtre",
  },
  en: {
    // General
    index_brand: "EPILERT",
    menu_dashboard: "Dashboard",
    menu_patients: "Patients",
    menu_profile: "Profile",
    menu_alerts: "Alerts",
    menu_settings: "Settings",
    account_pages: "Account Pages",
    logout: "Log Out",
    toggle_sidebar: "Toggle Sidebar",

    // Auth / Registration
    login_title: "Sign In to Epilert",
    login_subtitle: "Login with your data that you entered during registration",
    log_in: "Log in",
    email_address: "Email Address",
    password_label: "Password",
    remember_me: "Remember Me",
    forgot_password: "Forgot Password?",
    logging_in: "Logging in...",
    login_successful: "Login Successful",
    login_failed: "Login Failed",
    create_account: "Create Account",
    register_subtitle: "Register to start using Epilert",
    register_button: "Register",
    confirm_password: "Confirm Password",

    // Registration helpers
    agree_required: "You must agree to the terms",
    password_mismatch: "Passwords do not match",
    register: "Register",
    creating_account: "Creating account...",
    or_sign_up_with: "Or sign up with",
    already_have_account: "Already have an account?",

    // Dashboard
    dashboard_title: "Dashboard",
    dashboard_subtitle: "Here's what's happening with your patients today",
    greeting_morning: "Good Morning {name} !",
    new_seizures: "New Seizures",
    active_label: "Active",
    percent_from_last_week: "{value} from last week",
    from_last_week: "from last week",
    pending_cases: "Pending Cases",
    pending_label: "Pending",
    awaiting_review: "Awaiting review",
    high_risk_cases: "High Risk Cases",
    urgent_label: "Urgent",
    requires_attention: "Requires attention",
    seizure_activity_title: "Seizure Activity (7 Days)",
    patient_activity_overview: "Patient Activity Overview (30 Days)",
    recent_patients: "Recent Patients",
    risk_distribution: "Risk Distribution",
    monitoring_intensive: "Intensive Monitoring",
    total_patients: "Total Patients",
    total_label: "Total",
    total_alerts: "Total Alerts",
    critical_label: "Critical",
    warnings_label: "Warnings",
    info_label: "Info",
    risk_critical: "Critical",
    risk_high: "High",
    risk_medium: "Medium",
    risk_stable: "Stable",
    risk_low: "Low",

    // Alerts
    alerts_title: "Alerts",
    alerts_subtitle: "Here's what's happening with your patients today",
    all_alerts: "All Alerts",
    search_alerts_placeholder: "Search alerts by title, patient or description...",
    seizure_episode_detected: "Seizure Episode Detected",
    seizure_episode_desc: "Patient {name} experienced a severe seizure episode. Immediate attention required.",
    high_risk_score_alert_title: "High Risk Score Alert",
    high_risk_score_alert_desc: "Patient {name} risk score increased to {score}. Review recommended.",
    abnormal_heart_rate: "Abnormal Heart Rate",
    abnormal_heart_rate_desc: "Patient {name} heart rate at 105 bpm. Monitor closely.",
    medication_reminder: "Medication Reminder",
    medication_reminder_desc: "Patient {name} medication schedule due in 2 hours.",
    missed_appointment: "Missed Appointment",
    missed_appointment_desc: "Patient {name} missed scheduled appointment today.",
    treatment_completed: "Treatment Completed",
    treatment_completed_desc: "Patient {name} completed prescribed treatment successfully.",
    lab_results_available: "Lab Results Available",
    lab_results_available_desc: "New lab results for patient {name} are ready for review.",
    vital_signs_change: "Vital Signs Change",
    vital_signs_change_desc: "Patient {name} showing changes in vital signs. Review needed.",
    no_alerts_found: "No alerts found",
    view_details: "View Details",

    // Patients
    patients_title: "Patients",
    all_patients: "All Patients",
    manage_and_monitor: "Manage and monitor your patients",
    add_patient: "Add Patient",
    edit_patient_title: "Edit Patient",
    edit_patient_subtitle: "Modify the patient's information",
    back_to_patients: "Back to Patients",
    patient_not_found: "Patient not found",
    patient_updated: "Patient updated",
    patient_added: "Patient added",
    new_patient: "New patient",
    search_patients: "Search patients...",
    all_statuses: "All statuses",
    sort_by: "Sort by",
    sort_recent: "Recent",
    sort_name: "Name",
    sort_risk: "Risk",
    filter_label: "Filter",
    showing_entries: "Showing {count} of {total} entries",

    // Patient names
    patient_gomes_ing: "Gomes Ing",
    patient_mohamed_tarek: "Mohamed Tarek",
    patient_helena_baker: "Helena Baker",
    patient_reda: "reda",
    patient_safaa_fekni: "Safaa FEKNI",
    patient_testeur: "Testeur",
    patient_tester: "tester",
    patient_maya_brahimi: "Maya Brahimi",
    patient_hishem_driaesse: "Hishem Driaesse",
    patient_nada_soufiene: "Nada Soufiene",
    patient_randaj_grand: "Randaj D Grand",
    patient_leila_marissa: "Leila Marissa",
    patient_kais_saidi: "Kais Saidi",
    patient_mouaz_haddous: "Mouaz Haddous",
    patient_sara_benali: "Sara Benali",
    patient_amira_laith: "Amira Laith",

    // Medical descriptions
    medical_desc_reda: "New patient",
    medical_desc_safaa: "New patient",
    medical_desc_testeur: "New patient",
    medical_desc_tester: "New",
    medical_desc_maya: "Neurological disorder causing recurring seizure episode",
    medical_desc_hishem: "Vision and speech difficulties indicating potential stroke",
    medical_desc_nada: "Visions system disturbance from the CNS causing dizziness",
    medical_desc_randaj: "Transition from lack of blood circulation to brain preventing heart attack",
    medical_desc_leila: "Engorgement focal or tonic clonic seizure with loss of consciousness",
    medical_desc_kais: "Reduce motor ability of the heart resulting in inadequate",
    medical_desc_mouaz: "Pressure of tightness in the chest accompanied",
    medical_desc_sara: "Breathing difficulty triggered by physical exertion",
    medical_desc_amira: "Recurring of recurrent seizures with no identifiable cause",

    // Profile
    profile_title: "Profile",
    profile_subtitle: "Your professional information",
    edit_profile: "Edit Profile",
    available: "Available",
    short_bio: "Short Bio",
    professional_information: "Professional Information",
    education_label: "Education",
    availability_schedule: "Availability Schedule",
    license_number: "License Number",
    specialization: "Specialization",
    years_experience: "Years of Experience",
    department: "Department",

    // Patient details
    personal_info: "Personal Information",
    full_name: "Full name",
    age_label: "Age",
    age_label_short: "Age",
    phone_label: "Phone",
    email_label: "Email",
    email_label_short: "Email",
    address_label: "Address",
    health_status_label: "Health Status",
    medical_description: "Medical description",
    description_label: "Description",
    risk_score_label: "Risk Score",
    status_stable: "Stable",
    status_low: "Low",
    status_medium: "Medium",
    status_high: "High",
    status_critical: "Critical",
    status_pending: "Pending",
    status_success: "Success",

    // Table columns
    patients_table_status: "Status",
    patients_table_age: "Age",
    patients_table_description: "Disease Description",
    patients_table_risk_score: "Risk Score",
    patients_table_heart_rate: "Heart Rate",
    patients_table_health_status: "Health Status",
    patients_table_action: "Action",
    patients_table_last_visit: "Last Visit",
    patients_table_name: "Name",

    // Tabs
    tab_overview: "Overview",
    tab_seizure_history: "Seizure History",
    tab_medications: "Medications",
    tab_clinical_notes: "Clinical Notes",
    about: "About",
    vital_signs: "Vital Signs",

    // Note types
    consultation: "Consultation",
    observation: "Observation",
    followup: "Follow-up",

    // Time
    just_now: "Just now",
    minutes_ago: "{count} minutes ago",
    hours_ago: "{count} hours ago",
    days_ago: "{count} days ago",
    weeks_ago: "{count} weeks ago",

    // Settings
    settings_title: "Settings",
    settings_subtitle: "Manage your preferences and application settings",
    notifications: "Notifications",
    appearance: "Appearance",
    risk_score_settings: "Risk Score Settings",
    data_privacy: "Data & Privacy",

    // Notification settings
    critical_alerts_notifications: "Critical Seizure Alerts",
    critical_alerts_notifications_desc: "Receive notifications for high-risk patient alerts",
    medication_reminders: "Medication Reminders",
    medication_reminders_desc: "Receive reminders for patient medication schedules",
    appointment_notifications: "Appointment Notifications",
    appointment_notifications_desc: "Alerts for upcoming and missed appointments",

    // Risk score settings
    high_risk_threshold: "High Risk Threshold",
    high_risk_threshold_desc: "Patients above this score will be marked as high risk",
    alert_frequency: "Alert Frequency",
    realtime: "Realtime",
    hourly: "Hourly",
    daily: "Daily summary",

    // Privacy settings
    share_analytics: "Share Analytics Data",
    share_analytics_desc: "Help improve our AI models by sharing anonymized data",
    two_factor_auth: "Two-Factor Authentication",
    two_factor_auth_desc: "Add an extra layer of security to your account",

    // UI / Misc
    save: "Save",
    cancel: "Cancel",
    save_changes: "Save changes",
    reset: "Reset",
    settings_saved: "Settings saved",
    settings_saved_desc: "Your preferences have been updated",
    settings_reset: "Settings reset",
    settings_reset_desc: "Default settings have been restored",
    theme_light: "Light",
    theme_dark: "Dark",
    theme_system: "System",
    theme_label: "Theme",
    language_label: "Language",
    lang_fr: "Français",
    lang_en: "English",
    lang_ar: "العربية",

    // Alert types
    alert_type_critical: "Critical",
    alert_type_warning: "Warning",
    alert_type_info: "Info",
    alert_type_success: "Success",
    alert_type_medication_intake: "Medication Intake",
    medication_taken_title: "Medication Taken",
    medication_taken_desc: "Patient {name} has taken medication {medication}.",
    patient: "Patient",

    // Placeholder texts
    enter_email_address: "Enter your email address",
    enter_name: "Enter name",
    enter_password: "Enter password",

    // Confirmation messages
    delete_patient_confirmation: "Are you sure you want to delete the patient \"{name}\"? This action is irreversible.",
    confirm_delete: "Confirm deletion",
    loading: "Loading...",

    // Validation errors
    name_required: "Name is required",
    age_required: "Age is required",
    health_status_required: "Health status is required",
    patient_registered: "Patient registered",
    patient_added_description: "{name} has been successfully added to the record.",
    not_specified: "Not specified",
    just_now_text: "Just now",
    new_patient_text: "New patient",

    // PatientDetail toasts (English)
    missing_fields: "Missing fields",
    fill_all_required_fields: "Please fill all required fields",
    treatment_updated: "Treatment updated",
    treatment_updated_desc: "The treatment has been updated successfully",
    treatment_added: "Treatment added",
    treatment_added_desc: "New treatment added successfully",
    treatment_archived: "Treatment archived",
    treatment_archived_desc: "The treatment has been archived",
    treatment_unarchived: "Treatment unarchived",
    treatment_unarchived_desc: "The treatment has been reactivated",
    treatment_deleted: "Treatment deleted",
    treatment_deleted_desc: "The treatment has been deleted",
    note_added: "Note added",
    note_added_desc: "New note added successfully",
    note_updated: "Note updated",
    note_updated_desc: "The note has been updated",
    note_deleted: "Note deleted",
    note_deleted_desc: "The note has been deleted",
    seizure_recorded: "Seizure recorded",
    seizure_recorded_desc: "The seizure has been recorded successfully",
    seizure_updated: "Seizure updated",
    seizure_updated_desc: "The seizure has been updated",
    seizure_deleted: "Seizure deleted",
    seizure_deleted_desc: "The seizure has been deleted",
    fill_note_fields: "Please fill in the title and content",
    fill_seizure_fields: "Please fill in the type and duration",
    note_title_label: "Title",
    note_type_label: "Note Type",
    note_content_label: "Content",
    med_name_label: "Medication Name",
    med_dosage_label: "Dosage",
    med_frequency_label: "Frequency",
    med_date_label: "Start Date",
    med_notes_label: "Notes (optional)",
    seizure_type_label: "Seizure Type",
    seizure_duration_label: "Duration",
    seizure_date_label: "Date",
    seizure_notes_label: "Notes (optional)",
    not_provided: "Not provided",
    edit: "Edit",
    add: "Add",
    edit_medication: "Edit Treatment",
    add_medication: "Add New Treatment",
    edit_note: "Edit Clinical Note",
    add_note: "New Clinical Note",
    edit_seizure: "Edit Seizure",
    add_seizure: "Add New Seizure",
    delete_patient_button: "Delete Patient",
    // PatientDetail tabs and sections
    last_visit: "Last visit",
    patient_info: "Information",
    last_seizures: "Recent Seizures",
    manage_treatments: "Manage Treatments",
    manage_seizure_history: "Manage History",
    more_treatments: "+{count} more treatments",
    new_this_week: "New this week",
    patients_added: "Patients added",
    password_saved: "Password will be saved for this patient.",
    recently: "Recently",
    today: "Today",
    this_week: "This week",
    tomorrow: "Tomorrow",
    mark_all_read: "Mark all as read",
    new_badge: "New",
    alert_critical: "Critical",
    alert_warning: "Warning",
    alert_info: "Information",
    alert_success: "Success",
    view_patient_button: "View Patient",
    no_alerts_generated: "No alerts generated for your patients at this time.",
    adjust_search_filter: "Try adjusting your search or filter criteria",
  },
  ar: {
    // عام
    index_brand: "EPILERT",
    menu_dashboard: "لوحة القيادة",
    menu_patients: "المرضى",
    menu_profile: "الملف الشخصي",
    menu_alerts: "التنبيهات",
    menu_settings: "الإعدادات",
    account_pages: "صفحات الحساب",
    logout: "تسجيل الخروج",
    toggle_sidebar: "تبديل الشريط الجانبي",

    // المصادقة / التسجيل
    login_title: "تسجيل الدخول إلى EpilepticAI",
    login_subtitle: "نظام كشف النوبات المدعوم بالذكاء الاصطناعي للأطباء والمرضى - في الوقت المناسب، موثوق، ومصمم لفريق الرعاية.",
    log_in: "تسجيل الدخول",
    email_address: "البريد الإلكتروني",
    password_label: "كلمة المرور",
    remember_me: "تذكرني",
    forgot_password: "نسيت كلمة المرور؟",
    logging_in: "جاري تسجيل الدخول...",
    login_successful: "تم تسجيل الدخول بنجاح",
    login_failed: "فشل تسجيل الدخول",
    create_account: "إنشاء حساب",
    register_subtitle: "سجل لبدء استخدام EpilepticAI",
    register_button: "سجل",
    confirm_password: "تأكيد كلمة المرور",
    start_free_trial: "ابدأ التجربة المجانية",

    // مساعدات التسجيل
    agree_required: "يجب أن توافق على الشروط",
    password_mismatch: "كلمات المرور غير متطابقة",
    register: "تسجيل",
    creating_account: "جاري إنشاء الحساب...",
    or_sign_up_with: "أو سجل باستخدام",
    already_have_account: "هل لديك حساب بالفعل؟",

    // المميزات
    real_time_monitoring: "المراقبة في الوقت الحقيقي",
    clinically_validated_models: "نماذج معتمدة سريريًا",
    patient_friendly_alerts: "تنبيهات ملائمة للمرضى",
    secure_hipaa_storage: "تخزين آمن متوافق مع HIPAA",
    early_detection: "الكشف المبكر",
    early_detection_desc: "تنبيهات تنبؤية لتقليل وقت الاستجابة",
    clinician_tools: "أدوات الطبيب",
    clinician_tools_desc: "لوحات تحكم قابلة للتنفيذ وتقارير قابلة للتصدير",
    patient_safety: "سلامة المريض",
    patient_safety_desc: "تنبيهات قابلة للتخصيص لمقدمي الرعاية والمزودين",
    dashboard_preview: "معاينة لوحة القيادة",

    // لوحة القيادة
    dashboard_title: "لوحة القيادة",
    dashboard_subtitle: "إليك ما يحدث مع مرضاك اليوم",
    greeting_morning: "صباح الخير {name} !",
    new_seizures: "نوبات جديدة",
    active_label: "نشط",
    percent_from_last_week: "{value} منذ الأسبوع الماضي",
    from_last_week: "من الأسبوع الماضي",
    pending_cases: "الحالات المعلقة",
    pending_label: "قيد الانتظار",
    awaiting_review: "في انتظار المراجعة",
    high_risk_cases: "حالات عالية الخطورة",
    urgent_label: "عاجل",
    requires_attention: "يتطلب انتباهاً",
    seizure_activity_title: "نشاط النوبات (7 أيام)",
    patient_activity_overview: "نظرة عامة على نشاط المرضى (30 يومًا)",
    recent_patients: "المرضى الحديثون",
    risk_distribution: "توزيع المخاطر",
    monitoring_intensive: "مراقبة مكثفة",
    total_patients: "إجمالي المرضى",
    total_label: "الإجمالي",
    total_alerts: "إجمالي التنبيهات",
    critical_label: "حرج",
    warnings_label: "تحذيرات",
    info_label: "معلومات",
    risk_critical: "حرج",
    risk_high: "مرتفع",
    risk_medium: "متوسط",
    risk_stable: "مستقر",
    risk_low: "منخفض",

    // التنبيهات
    alerts_title: "التنبيهات",
    alerts_subtitle: "إليك ما يحدث مع مرضاك اليوم",
    all_alerts: "جميع التنبيهات",
    search_alerts_placeholder: "ابحث في التنبيهات حسب العنوان أو المريض أو الوصف...",
    seizure_episode_detected: "تم اكتشاف نوبة",
    seizure_episode_desc: "المريض {name} تعرض لنوبة شديدة. يتطلب انتباهاً فورياً.",
    high_risk_score_alert_title: "تنبيه درجة مخاطرة عالية",
    high_risk_score_alert_desc: "ارتفعت درجة مخاطرة المريض {name} إلى {score}. يُنصح بالمراجعة.",
    abnormal_heart_rate: "معدل ضربات القلب غير الطبيعي",
    abnormal_heart_rate_desc: "معدل ضربات قلب المريض {name} عند 105 نبضة في الدقيقة. المراقبة عن قرب مطلوبة.",
    medication_reminder: "تذكير الدواء",
    medication_reminder_desc: "جدول أدوية المريض {name} مستحق بعد ساعتين.",
    missed_appointment: "موعد فائت",
    missed_appointment_desc: "المريض {name} فوت الموعد المجدول اليوم.",
    treatment_completed: "اكتمل العلاج",
    treatment_completed_desc: "المريض {name} أكمل العلاج الموصوف بنجاح.",
    lab_results_available: "نتائج المختبر متاحة",
    lab_results_available_desc: "نتائج مختبر جديدة للمريض {name} جاهزة للمراجعة.",
    vital_signs_change: "تغيير العلامات الحيوية",
    vital_signs_change_desc: "المريض {name} يظهر تغييرات في العلامات الحيوية. المراجعة مطلوبة.",
    no_alerts_found: "لم يتم العثور على أي تنبيهات",
    view_details: "عرض التفاصيل",

    // المرضى
    patients_title: "المرضى",
    all_patients: "جميع المرضى",
    manage_and_monitor: "إدارة ومراقبة مرضاك",
    add_patient: "إضافة مريض",
    edit_patient_title: "تعديل المريض",
    edit_patient_subtitle: "قم بتعديل معلومات المريض",
    back_to_patients: "العودة إلى المرضى",
    patient_not_found: "المريض غير موجود",
    patient_updated: "تم تحديث المريض",
    patient_added: "تمت إضافة المريض",
    new_patient: "مريض جديد",
    search_patients: "ابحث عن المرضى...",
    all_statuses: "جميع الحالات",
    sort_by: "فرز حسب",
    sort_recent: "الأحدث",
    sort_name: "الاسم",
    sort_risk: "المخاطرة",
    filter_label: "مرشح",
    showing_entries: "عرض {count} من أصل {total} إدخال",

    // أسماء المرضى
    patient_gomes_ing: "جوميز إنغ",
    patient_mohamed_tarek: "محمد طارق",
    patient_helena_baker: "هيلينا بيكر",
    patient_reda: "رضا",
    patient_safaa_fekni: "صفاء فكني",
    patient_testeur: "مختبر",
    patient_tester: "مختبر",
    patient_maya_brahimi: "مايا براهيمي",
    patient_hishem_driaesse: "هشام درياس",
    patient_nada_soufiene: "ندى سفيان",
    patient_randaj_grand: "رندج جراند",
    patient_leila_marissa: "ليلى ماريسا",
    patient_kais_saidi: "قيس سعيدي",
    patient_mouaz_haddous: "معز حدوس",
    patient_sara_benali: "سارة بنعلي",
    patient_amira_laith: "أميرة لايت",

    // الأوصاف الطبية
    medical_desc_reda: "مريض جديد",
    medical_desc_safaa: "مريض جديد",
    medical_desc_testeur: "مريض جديد",
    medical_desc_tester: "جديد",
    medical_desc_maya: "اضطراب عصبي يسبب نوبات متكررة",
    medical_desc_hishem: "صعوبات في الرؤية والكلام تشير إلى سكتة دماغية محتملة",
    medical_desc_nada: "اضطراب في النظام البصري من الجهاز العصبي المركزي يسبب الدوخة",
    medical_desc_randaj: "انتقال من نقص الدورة الدموية إلى الدماغ يمنع النوبة القلبية",
    medical_desc_leila: "نوبة بؤرية محتقنة أو نوبة توترية رمعية مع فقدان الوعي",
    medical_desc_kais: "تقليل القدرة الحركية للقلب مما يؤدي إلى عدم كفاية",
    medical_desc_mouaz: "ضغط أو ضيق في الصدر مصحوب",
    medical_desc_sara: "صعوبة في التنفس تثيرها المجهود البدني",
    medical_desc_amira: "نوبات متكررة بدون سبب محدد",

    // الملف الشخصي
    profile_title: "الملف الشخصي",
    profile_subtitle: "معلوماتك المهنية",
    edit_profile: "تعديل الملف",
    available: "متاح",
    short_bio: "سيرة ذاتية قصيرة",
    professional_information: "المعلومات المهنية",
    education_label: "التعليم",
    availability_schedule: "جدول التوفر",
    license_number: "رقم الترخيص",
    specialization: "التخصص",
    years_experience: "سنوات الخبرة",
    department: "القسم",

    // تفاصيل المريض
    personal_info: "المعلومات الشخصية",
    full_name: "الاسم الكامل",
    age_label: "العمر",
    age_label_short: "العمر",
    phone_label: "الهاتف",
    email_label: "البريد الإلكتروني",
    email_label_short: "البريد الإلكتروني",
    address_label: "العنوان",
    health_status_label: "الحالة الصحية",
    medical_description: "الوصف الطبي",
    description_label: "الوصف",
    risk_score_label: "درجة المخاطرة",
    status_stable: "مستقر",
    status_low: "منخفض",
    status_medium: "متوسط",
    status_high: "مرتفع",
    status_critical: "حرج",
    status_pending: "قيد الانتظار",
    status_success: "نجاح",

    // أعمدة الجدول
    patients_table_status: "الحالة",
    patients_table_age: "العمر",
    patients_table_description: "وصف المرض",
    patients_table_risk_score: "درجة المخاطرة",
    patients_table_heart_rate: "معدل ضربات القلب",
    patients_table_health_status: "الحالة الصحية",
    patients_table_action: "إجراء",
    patients_table_last_visit: "آخر زيارة",
    patients_table_name: "الاسم",

    // علامات التبويب
    tab_overview: "نظرة عامة",
    tab_seizure_history: "تاريخ النوبات",
    tab_medications: "الأدوية",
    tab_clinical_notes: "الملاحظات السريرية",
    about: "حول",
    vital_signs: "العلامات الحيوية",

    // أنواع الملاحظات
    consultation: "استشارة",
    observation: "ملاحظة",
    followup: "متابعة",

    // الوقت
    just_now: "الآن",
    minutes_ago: "منذ {count} دقيقة",
    hours_ago: "منذ {count} ساعة",
    days_ago: "منذ {count} يوم",
    weeks_ago: "منذ {count} أسبوع",

    // الإعدادات
    settings_title: "الإعدادات",
    settings_subtitle: "إدارة تفضيلاتك وإعدادات التطبيق",
    notifications: "الإشعارات",
    appearance: "المظهر",
    risk_score_settings: "إعدادات درجة المخاطرة",
    data_privacy: "البيانات والخصوصية",

    // إعدادات الإشعارات
    critical_alerts_notifications: "تنبيهات النوبات الحرجة",
    critical_alerts_notifications_desc: "تلقي إشعارات لتنبيهات المرضى عالية الخطورة",
    medication_reminders: "تذكير الأدوية",
    medication_reminders_desc: "تلقي تذكيرات لجدول أدوية المرضى",
    appointment_notifications: "إشعارات المواعيد",
    appointment_notifications_desc: "تنبيهات للمواعيد القادمة والفائتة",

    // إعدادات درجة المخاطرة
    high_risk_threshold: "عتبة الخطورة العالية",
    high_risk_threshold_desc: "المرضى فوق هذا الدرجة سيتم وضع علامة عليهم كخطورة عالية",
    alert_frequency: "تردد التنبيه",
    realtime: "الوقت الحقيقي",
    hourly: "كل ساعة",
    daily: "ملخص يومي",

    // إعدادات الخصوصية
    share_analytics: "مشاركة البيانات التحليلية",
    share_analytics_desc: "ساعد في تحسين نماذج الذكاء الاصطناعي لدينا من خلال مشاركة البيانات المجهولة",
    two_factor_auth: "المصادقة الثنائية",
    two_factor_auth_desc: "أضف طبقة أمان إضافية إلى حسابك",

    // واجهة المستخدم ومتنوع
    save: "حفظ",
    cancel: "إلغاء",
    save_changes: "حفظ التغييرات",
    reset: "إعادة تعيين",
    settings_saved: "تم حفظ الإعدادات",
    settings_saved_desc: "تم تحديث تفضيلاتك",
    settings_reset: "تم إعادة تعيين الإعدادات",
    settings_reset_desc: "تمت استعادة الإعدادات الافتراضية",
    theme_light: "فاتح",
    theme_dark: "داكن",
    theme_system: "النظام",
    theme_label: "السمة",
    language_label: "اللغة",
    lang_fr: "الفرنسية",
    lang_en: "الإنجليزية",
    lang_ar: "العربية",

    // أنواع التنبيهات
    alert_type_critical: "حرج",
    alert_type_warning: "تحذير",
    alert_type_info: "معلومات",
    alert_type_success: "نجاح",
    alert_type_medication_intake: "تناول الدواء",
    medication_taken_title: "تم تناول الدواء",
    medication_taken_desc: "تناول المريض {name} الدواء {medication}.",
    patient: "المريض",

    // Placeholder texts
    enter_email_address: "أدخل بريدك الإلكتروني",
    enter_name: "أدخل الاسم",
    enter_password: "أدخل كلمة المرور",

    // Confirmation messages
    delete_patient_confirmation: "هل أنت متأكد من رغبتك في حذف المريض \"{name}\"؟ هذا الإجراء غير قابل للعكس.",
    confirm_delete: "تأكيد الحذف",
    loading: "جاري التحميل...",

    // Validation errors
    name_required: "الاسم مطلوب",
    age_required: "العمر مطلوب",
    health_status_required: "الحالة الصحية مطلوبة",
    patient_registered: "تم تسجيل المريض",
    patient_added_description: "تمت إضافة {name} بنجاح إلى السجل.",
    not_specified: "غير محدد",
    just_now_text: "الآن",
    new_patient_text: "مريض جديد",

    // PatientDetail toasts (Arabic)
    missing_fields: "حقول مفقودة",
    fill_all_required_fields: "يرجى ملء جميع الحقول المطلوبة",
    treatment_updated: "تم تحديث العلاج",
    treatment_updated_desc: "تم تحديث العلاج بنجاح",
    treatment_added: "تمت إضافة العلاج",
    treatment_added_desc: "تمت إضافة علاج جديد بنجاح",
    treatment_archived: "تم أرشفة العلاج",
    treatment_archived_desc: "تم أرشفة العلاج",
    treatment_unarchived: "تم إلغاء أرشفة العلاج",
    treatment_unarchived_desc: "تم إعادة تفعيل العلاج",
    treatment_deleted: "تم حذف العلاج",
    treatment_deleted_desc: "تم حذف العلاج",
    note_added: "تمت إضافة الملاحظة",
    note_added_desc: "تمت إضافة ملاحظة جديدة بنجاح",
    note_updated: "تم تحديث الملاحظة",
    note_updated_desc: "تم تحديث الملاحظة",
    note_deleted: "تم حذف الملاحظة",
    note_deleted_desc: "تم حذف الملاحظة",
    seizure_recorded: "تم تسجيل النوبة",
    seizure_recorded_desc: "تم تسجيل النوبة بنجاح",
    seizure_updated: "تم تحديث النوبة",
    seizure_updated_desc: "تم تحديث النوبة",
    seizure_deleted: "تم حذف النوبة",
    seizure_deleted_desc: "تم حذف النوبة",
    fill_note_fields: "يرجى ملء العنوان والمحتوى",
    fill_seizure_fields: "يرجى ملء النوع والمدة",
    note_title_label: "العنوان",
    note_type_label: "نوع الملاحظة",
    note_content_label: "المحتوى",
    med_name_label: "اسم الدواء",
    med_dosage_label: "الجرعة",
    med_frequency_label: "التكرار",
    med_date_label: "تاريخ البدء",
    med_notes_label: "ملاحظات (اختياري)",
    seizure_type_label: "نوع النوبة",
    seizure_duration_label: "المدة",
    seizure_date_label: "التاريخ",
    seizure_notes_label: "ملاحظات (اختياري)",
    not_provided: "لم يتم توفيره",
    edit: "تعديل",
    add: "إضافة",
    edit_medication: "تعديل العلاج",
    add_medication: "إضافة علاج جديد",
    edit_note: "تعديل الملاحظة السريرية",
    add_note: "ملاحظة سريرية جديدة",
    edit_seizure: "تعديل النوبة",
    add_seizure: "إضافة نوبة جديدة",
    delete_patient_button: "حذف المريض",
    // PatientDetail tabs and sections
    last_visit: "آخر زيارة",
    patient_info: "معلومات",
    last_seizures: "نوبات حديثة",
    manage_treatments: "إدارة العلاجات",
    manage_seizure_history: "إدارة السجل",
    more_treatments: "+{count} علاجات أخرى",
    new_this_week: "جديد هذا الأسبوع",
    patients_added: "تم إضافة المرضى",
    password_saved: "سيتم حفظ كلمة المرور لهذا المريض.",
    recently: "في الآونة الأخيرة",
    today: "اليوم",
    this_week: "هذا الأسبوع",
    tomorrow: "غدا",
    mark_all_read: "تحديد الكل كمقروء",
    new_badge: "جديد",
    alert_critical: "حرج",
    alert_warning: "تحذير",
    alert_info: "معلومات",
    alert_success: "نجاح",
    view_patient_button: "عرض المريض",
    no_alerts_generated: "لم يتم إنشاء تنبيهات لمرضاك في الوقت الحالي.",
    adjust_search_filter: "حاول تعديل معايير البحث أو التصفية",
  }
};

interface I18nContextType {
  lang: Lang;
  t: (key: string, params?: Record<string, string | number>, fallback?: string) => string;
}

const I18nContext = createContext<I18nContextType | undefined>(undefined);

export const I18nProvider = ({ children }: { children: ReactNode }) => {
  const { settings } = useSettings();
  const lang = (settings?.appearance?.language as Lang) || "en";

  const t = (key: string, params?: Record<string, string | number>, fallback?: string) => {
    let translation = translations[lang]?.[key] ?? fallback ?? key;

    // استبدال المعلمات الديناميكية
    if (params) {
      Object.entries(params).forEach(([param, value]) => {
        translation = translation.replace(`{${param}}`, String(value));
      });
    }

    return translation;
  };

  const value = useMemo(() => ({ lang, t }), [lang]);

  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>;
};

export const useTranslation = () => {
  const ctx = useContext(I18nContext);
  if (!ctx) throw new Error("useTranslation must be used within I18nProvider");
  return ctx;
};