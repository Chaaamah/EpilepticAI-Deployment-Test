services:
  # Backend API
  - type: web
    name: epileptic-ai-backend
    env: docker
    dockerfilePath: ./Dockerfile
    region: frankfurt
    plan: free
    healthCheckPath: /docs
    envVars:
      - key: APP_NAME
        value: EpilepticAI
      - key: VERSION
        value: 1.0.0
      - key: DEBUG
        value: false
      - key: ENVIRONMENT
        value: production
      - key: SECRET_KEY
        generateValue: true
      - key: ALGORITHM
        value: HS256
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: 10080
      - key: DATABASE_URL
        fromDatabase:
          name: epileptic-ai-db
          property: connectionString
      - key: BACKEND_CORS_ORIGINS
        value: '["*"]'
      - key: ML_MODEL_PATH
        value: models/seizure.keras
      - key: PREDICTION_THRESHOLD
        value: 0.7
      - key: TWILIO_ACCOUNT_SID
        value: YOUR_TWILIO_SID
      - key: TWILIO_AUTH_TOKEN
        value: YOUR_TWILIO_TOKEN
      - key: TWILIO_PHONE_NUMBER
        value: YOUR_TWILIO_PHONE
      - key: BIOMETRIC_COLLECTION_INTERVAL
        value: 5
      - key: PREDICTION_INTERVAL
        value: 5
      - key: PREDICTION_WINDOW_MINUTES
        value: 30
      - key: ALERT_DELAY_MINUTES
        value: 15
      - key: ALERT_COOLDOWN_MINUTES
        value: 15
      - key: ENABLE_SMS_ALERTS
        value: true
      - key: ENABLE_PUSH_NOTIFICATIONS
        value: true

databases:
  - name: epileptic-ai-db
    databaseName: epileptic_ai
    user: postgres
    region: frankfurt
    plan: free
